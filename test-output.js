const view = Uint8Array.of(0,97,115,109,1,0,0,0,1,12,3,96,1,125,0,96,1,127,0,96,0,0,2,45,3,7,99,111,110,115,111,108,101,3,108,111,103,0,0,7,99,111,110,115,111,108,101,4,119,97,114,110,0,0,7,99,111,110,115,111,108,101,4,119,97,114,110,0,1,3,3,2,2,2,7,8,1,4,99,97,108,99,0,4,8,1,3,10,28,2,23,0,208,111,26,208,111,26,208,111,26,208,111,26,208,111,26,208,111,26,208,111,26,11,2,0,11,11,22,1,1,19,102,105,108,101,58,47,47,116,101,115,116,45,111,117,116,46,116,120,116,0,117,4,110,97,109,101,1,85,5,0,21,115,101,108,102,46,99,111,110,115,111,108,101,46,108,111,103,60,102,51,50,62,1,22,115,101,108,102,46,99,111,110,115,111,108,101,46,119,97,114,110,60,102,51,50,62,2,22,115,101,108,102,46,99,111,110,115,111,108,101,46,119,97,114,110,60,105,51,50,62,3,5,65,114,114,97,121,4,4,99,97,108,99,2,11,5,0,0,1,0,2,0,3,0,4,0,9,10,1,0,7,102,105,108,114,101,97,100);
export let wasm = view.buffer;

wasm.module = null;
wasm.instances = new Array;

const compile = async () => WebAssembly.compile(wasm).then(m => {
    wasm.module = m;
    return wasm;
});

const instantiate = async () => WebAssembly.instantiate(wasm.module, self).then(i => {
    wasm.instances.push(i);    
    return i;
});

wasm.spawn = async imports => {
    if (wasm.module instanceof WebAssembly.Module === false) {
        Object.assign(self, Object(imports));
        return compile().then(() => instantiate());
    } 
    return instantiate();
};

export default wasm;