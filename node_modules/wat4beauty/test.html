<!DOCTYPE html>

<button onclick="run_wat4beauty_text()">beautify</button>
<textarea id="ugly">(module
(import "env" "log" (func $log (param i32)))
(import "env" "another_logn_imported" (global $log i32))

(global $global_named (mut i32) (i32.const 0))
(global $another_extern_but_long_name (mut extern) (ref.null externref))

(func $main (export "main") 
(result i32)
(local $temp i32)
)

(func (export "new_exported")
(param $argument0 i32)
(param $namedparam funcref)
(param $function_reference funcref)
(result i32)

(local i32)
(local $vector<i32x4> v128)

(call $main_inthis
(local.get 0) 
(global.get $global_named)
)
)
)</textarea>
<textarea id="nice"></textarea>
<script type="module">
    import wat4beauty from "./index.js"
    self.run_wat4beauty_text = function () {

        const alignIndentWith = "    "; //default: \t
        const exportLeftStart = Math.floor(nice.clientWidth / 100) * 10 + 15;   //default: 90

        nice.textContent = wat4beauty(
            ugly.textContent,
            alignIndentWith,
            exportLeftStart
        );
    }
</script>
<style>
    body {
        margin: 0;
    }

    textarea {
        width: calc(45vw - 22.5px);
        height: 40vw;
        margin: 2.5vw;
        padding: 10px;
        display: inline-block;
        border: 0;
        box-shadow: inset 0 0 2px black;
    }

    button {
        background: #003366;
        padding: 10px;
        width: 20vw;
        font-size: 1.38em;
        border-radius: 6px;
        display: block;
        margin: 10px auto;
        color: white;
    }
</style>